<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Git" />










<meta name="description" content="1 Git是什么Git是一个分布式的版本控制系统。 注意上面的”分布式的“这个限定词，这一点是Git和CVS，VSN等其他版本控制系统最大的分别。 集中式版本控制系统最大的毛病就是必须联网才能够工作，也就是各个客户端必须连接到中央仓库才能够工作。 分布式的版本控制系统中，不必有中央仓库，每个人的电脑上都有一个完整的版本库。我们可以在自己的电脑上修改、提交。如果两个人需要交换修改的代码，则需要将自己">
<meta name="keywords" content="Git">
<meta property="og:type" content="article">
<meta property="og:title" content="Git教程">
<meta property="og:url" content="http://www.afrag.wang/工具/Tools-Git-tutorial/index.html">
<meta property="og:site_name" content="昼夜不过是光阴的门户">
<meta property="og:description" content="1 Git是什么Git是一个分布式的版本控制系统。 注意上面的”分布式的“这个限定词，这一点是Git和CVS，VSN等其他版本控制系统最大的分别。 集中式版本控制系统最大的毛病就是必须联网才能够工作，也就是各个客户端必须连接到中央仓库才能够工作。 分布式的版本控制系统中，不必有中央仓库，每个人的电脑上都有一个完整的版本库。我们可以在自己的电脑上修改、提交。如果两个人需要交换修改的代码，则需要将自己">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="http://www.afrag.wang/工具/Tools-Git-tutorial/branch-1.png">
<meta property="og:image" content="http://www.afrag.wang/工具/Tools-Git-tutorial/branch-2.png">
<meta property="og:image" content="http://www.afrag.wang/工具/Tools-Git-tutorial/branch-3.png">
<meta property="og:image" content="http://www.afrag.wang/工具/Tools-Git-tutorial/branch-4.png">
<meta property="og:image" content="http://www.afrag.wang/工具/Tools-Git-tutorial/branch-5.png">
<meta property="og:image" content="http://www.afrag.wang/工具/Tools-Git-tutorial/branch-6.png">
<meta property="og:image" content="http://www.afrag.wang/工具/Tools-Git-tutorial/branch-7.png">
<meta property="og:updated_time" content="2020-03-13T02:13:08.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Git教程">
<meta name="twitter:description" content="1 Git是什么Git是一个分布式的版本控制系统。 注意上面的”分布式的“这个限定词，这一点是Git和CVS，VSN等其他版本控制系统最大的分别。 集中式版本控制系统最大的毛病就是必须联网才能够工作，也就是各个客户端必须连接到中央仓库才能够工作。 分布式的版本控制系统中，不必有中央仓库，每个人的电脑上都有一个完整的版本库。我们可以在自己的电脑上修改、提交。如果两个人需要交换修改的代码，则需要将自己">
<meta name="twitter:image" content="http://www.afrag.wang/工具/Tools-Git-tutorial/branch-1.png">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://www.afrag.wang/工具/Tools-Git-tutorial/"/>





  <title>Git教程 | 昼夜不过是光阴的门户</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">昼夜不过是光阴的门户</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">Afrag键盘的回响</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  


  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://www.afrag.wang/工具/Tools-Git-tutorial/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Afrag Wang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="昼夜不过是光阴的门户">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">Git教程</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-03-13T10:13:08+08:00">
                2020-03-13
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/工具/" itemprop="url" rel="index">
                    <span itemprop="name">工具</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          
             <span id="/工具/Tools-Git-tutorial/" class="leancloud_visitors" data-flag-title="Git教程">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数&#58;</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  5,196
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  18
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h1 id="1-Git是什么"><a href="#1-Git是什么" class="headerlink" title="1 Git是什么"></a>1 Git是什么</h1><p>Git是一个<strong><em>分布式的</em></strong>版本控制系统。</p>
<p>注意上面的”分布式的“这个限定词，这一点是Git和CVS，VSN等其他版本控制系统最大的分别。</p>
<p>集中式版本控制系统最大的毛病就是必须联网才能够工作，也就是各个客户端必须连接到中央仓库才能够工作。</p>
<p>分布式的版本控制系统中，不必有中央仓库，每个人的电脑上都有一个完整的版本库。我们可以在自己的电脑上修改、提交。如果两个人需要交换修改的代码，则需要将自己的修改推送给对方。<br><a id="more"></a><br>在实际的应用中，为了方便一个团队之间交换代码修改，我们还是有一个中央仓库。注意这个仓库是提供便利的，并不是没有它就不行（虽然会很不方便）。</p>
<p>这个教程的主要目的是让大家了解使用Git进行版本管理的一些基本操作和逻辑，让大家对Git的使用有一个基本的了解。如果想要详细了解每个命令的用法，或者要了解一些“高级”的命令，建议大家还是去看看Git的手册。</p>
<h1 id="2-创建本地仓库"><a href="#2-创建本地仓库" class="headerlink" title="2. 创建本地仓库"></a>2. 创建本地仓库</h1><p>关于Git的安装，这里就不讲了，网上有很多文章，大家根据自己的系统，找一篇文章照着做就可以了。这里主要讲解Git的一些概念和操作。</p>
<p>前面已经说过，Git是一个分布式的版本控制系统，每个人的电脑上都有一个完整的版本库，我们把这个版本库称为本地仓库。所有其他的仓库，无论是同事电脑上的，还是中央服务器的，我们都称为远程仓库。</p>
<p>创建本地仓库有两种方式，第一种是我们从零开始创建，第二种是从远程仓库克隆一份。</p>
<p>我们可以把版本仓库理解为一个目录，其中保存了我们所有让git管理的文件。Git能够跟踪这些文件的修改、删除，能够追踪这些文件的历史，并且可以还原。</p>
<h2 id="2-1-从头开始创建本地仓库"><a href="#2-1-从头开始创建本地仓库" class="headerlink" title="2.1 从头开始创建本地仓库"></a>2.1 从头开始创建本地仓库</h2><p>从头开始创建本地仓库非常简单。</p>
<ol>
<li>选择你想要创建版本仓库的地方，创建一个空的目录。</li>
<li>进入该目录，在命令行中执行git init命令，把这个目录变成Git可以管理的版本仓库。</li>
<li>把文件添加到Git仓库中，一共需要三步：<ul>
<li>把文件放到Git仓库的目录中，无论是新创建一个文件，还是从其他地方copy一个文件。也可以放在子目录中</li>
<li>运行<code>git add &lt;filepath&gt;</code>,告诉Git把文件添加到仓库中。</li>
<li>使用<code>git commit</code>命令，告诉Git把改变提交到仓库。</li>
</ul>
</li>
</ol>
<h2 id="2-2-从远程仓库克隆"><a href="#2-2-从远程仓库克隆" class="headerlink" title="2.2 从远程仓库克隆"></a>2.2 从远程仓库克隆</h2><p>相比从头开始创建本地仓库，我们做得更多的是从远程仓库克隆一份。理论上来说远程仓库可以是任何一台电脑上的仓库，但是通常来说，我们会在github，或自己搭建的git服务器上创建中央仓库，团队中的所有成员都从该仓库上克隆，并在后续将自己的修改上传上去，或者从中央仓库读取其他同事的修改。因此我们这样只讲怎样中央仓库克隆到本地仓库。</p>
<ol>
<li>创建本机的ssh-key，在类linux系统上，只需要运行ssh-keygen命令就可以了。</li>
<li>将ssh-key的公钥id_rsa.pub上传到github或者Git服务器上，具体的步骤要参考你们是要的Git服务器是哪一个。</li>
<li>执行命令<code>git clone &lt;版本库的网址&gt; [本地目录名]</code>来创建本地仓库。如果不指定目录，则会在当前目录下创建一个目录，名字与远程版本库的名字相同。</li>
</ol>
<p>上面的命令中，版本库的网址中是可以带上协议、用户名等信息的。Git支持http(s)，ssh，git，ftp(s),本地文件协议等不同的协议。</p>
<h1 id="3-使用本地仓库进行版本管理"><a href="#3-使用本地仓库进行版本管理" class="headerlink" title="3 使用本地仓库进行版本管理"></a>3 使用本地仓库进行版本管理</h1><h2 id="3-1-工作区和暂存区"><a href="#3-1-工作区和暂存区" class="headerlink" title="3.1 工作区和暂存区"></a>3.1 工作区和暂存区</h2><p>为了能够更好的使用本地仓库进行版本管理，我们先了解一下工作区和暂存区的概念。</p>
<p>无论我们是从远程仓库克隆，还是使用<code>git init</code>命令新建一个本地仓库，最终在本地仓库的目录中，都有一个隐藏的子目录<code>.git</code>。</p>
<p>本地仓库目录是我们的工作区，我们要管理的文件都在这个目录中。但是<code>.git</code>目录不是工作区，这个是版本库。我们不要手动去修改这个目录中的内容。</p>
<p>在这个版本库中，保存了很多的东西，其中最重要的是暂存区，以及分支。关于分支的概念，我们以后再解释。目前来说，我们也只有一个分支，也就是Git自动为我们创建的master分区。还有一个指向master分区的指针，叫做HEAD。</p>
<p>前面我们已经提到过，在添加一个文件到Git本地仓库中的时候，需要先执行<code>git add</code>命令，然后执行<code>git commit</code>命令。其中<code>git add</code>命令就是将变化的代码从工作区拷贝到暂存区。 <code>git commit</code>则是将代码从暂存区提交到版本库。一旦提交后，暂存区会被清空。</p>
<p>所以，我们其实可以执行多次<code>git add</code>之后，执行一次<code>git commit</code>，一次性的将多次修改的结果进行提交。</p>
<p>可以使用git status来查看有哪些修改没有add到暂存区，有哪些修改在暂存区中，没有提交到版本库。</p>
<h2 id="3-2-提交版本和查看历史"><a href="#3-2-提交版本和查看历史" class="headerlink" title="3.2 提交版本和查看历史"></a>3.2 提交版本和查看历史</h2><p>我们修改了一个或多个文件之后，可以使用<code>git add</code>和<code>git commit</code>命令将修改提交到版本库。在使用<code>git commit</code>命令时，可以使用-m选项来添加备注。该命令会得到类似下面的返回：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git commit -m <span class="string">"Fixed the type mistake in readme.txt"</span></span><br><span class="line">[master 0db896a] Fixed the <span class="built_in">type</span> mistake <span class="keyword">in</span> readme.txt</span><br><span class="line"> 1 file changed, 1 insertion(+), 1 deletion(-)</span><br></pre></td></tr></table></figure></p>
<p>这个命令返回的信息中，包含了提交的分支，本次提交自动生成的版本号(commit id)，输入的备注，以及修改内容的统计信息。 <strong>注意这里的版本号可能不是完整的版本号，而只是版本号的前几位</strong>。</p>
<p>我们可以看到，Git的版本号是一个用十六进制表示的随机数字，这是为了避免各自在本地数据库中提交时版本号的冲突。</p>
<p>Git会记录下我们所有的版本历史，可以使用<code>git log</code>命令来查看。</p>
<h2 id="3-3-版本回退"><a href="#3-3-版本回退" class="headerlink" title="3.3 版本回退"></a>3.3 版本回退</h2><p>版本回退是版本管理系统最基本的功能。如果不能回退，要这系统何用。</p>
<p>要回退，首先需要知道回退到哪个版本。可以使用<code>git log</code>命令来查看版本历史信息。然后使用<code>git rest --hard &lt;版本号&gt;</code>来进行回退。这里的版本号不需要输全，只需要输入前面几位，能够唯一确认一个版本就可以了。</p>
<p>使用<code>git log</code>的时候，我们看到的会是一堆密密麻麻的信息。如果我们使用图形化的Git工具，就能够很直观的看到Git是将所有的提交按照时间顺序串成了一条线，在这个时间线上每一个点就是一次提交，每一次提交都有很多的信息，比如提交人是谁，版本号是多少，备注信息是什么。</p>
<p>这下就体现了提交的时候使用备注的好处了，我们可以通过备注知道每一次修改的原因和内容，这样才知道需要回退到哪个版本。</p>
<p>如果我们从今天的版本回退到了昨天的版本，还能不能回到今天的版本呢？可以的，但是前提要是你还记得今天的版本的版本号。如果我们前面的窗口没有关闭，可以从<code>git log</code>命令的输出中找到今天的版本号。如果已经关闭了，则可以重新使用<code>git reflog</code>命令查看我们执行的每一条命令。这样就可以使用<code>git rest</code>恢复到今天的版本了。</p>
<h2 id="3-4-管理修改"><a href="#3-4-管理修改" class="headerlink" title="3.4 管理修改"></a>3.4 管理修改</h2><p>前面讲过了工作区和暂存区。因此Git相比其他的版本管理系统多了一层。这一层有什么作用呢？</p>
<p>我们在提交的时候，提交的是暂存区中的内容，而不是工作区中的内容。因此，我们在修改的时候，可以多次将中间代码添加到暂存区。我们既不需要产生大量的中间版本号和提交记录，也可以保证不会因为后续的修改弄丢了前面的代码。我们可以大胆的试错，发现不合适了，很容易回滚到前一个版本。</p>
<p>我们可以使用<code>git checkout -- &lt;file&gt;</code>来撤销工作区的修改。这个时候，如果暂存区中有还没有提交的修改，那么会使用暂存区中的内容覆盖工作区中的内容。如果暂存区中的修改都已经提交了，那么会用版本库中的内容覆盖工作区中的内容。 注意<code>--</code>不能省略，省略了就变成切换分支的命令了。</p>
<p>当然，删除文件也是一种修改。一般我们把文件从Git的目录中删除之后，Git会检测到，并且使用<code>git status</code>命令能够看到。这个时候，如果确实要删除文件，可以使用<code>git rm &lt;file&gt;</code>来告诉暂存区我们要删除这文件，然后用<code>git commit</code>命令提交修改，从版本库中删除文件。</p>
<p>如果是误删除的，可以使用<code>git checkout -- &lt;file&gt;</code>命令从版本库中恢复文件。</p>
<h1 id="4-分支管理"><a href="#4-分支管理" class="headerlink" title="4 分支管理"></a>4 分支管理</h1><p>前面我们提到了，从<code>git log</code>可以看到我们所有的提交的历史记录，并且按照先后顺序串成了一条线，这条线就是一个“分支”。只不过我们现在只有一个分支，就是创建本地仓库时，默认为我们创建一个master分支，通常称为主分支。<br>这个分支目前的情况如下面的示意图：</p>
<p>分支允许我们创建另外一条”路径“，同时管理两个版本的代码。例如，我们完成了1.0版本，进入2.0版本的开发。但是我们同时需要进行1.0版本的维护，修复bug。这个时候，我们就可以同时维护1.0分支和2.0分支。</p>
<h2 id="4-1-创建与合并分支"><a href="#4-1-创建与合并分支" class="headerlink" title="4.1 创建与合并分支"></a>4.1 创建与合并分支</h2><p>分支就是提交记录组成的一个时间线，因此一个分支可以表示如下：</p>
<p><img src="/工具/Tools-Git-tutorial/branch-1.png" alt="master分支示意图"></p>
<p>分支master指向该分支中的最后一次提交。然后Git还会用HEAD指向master，表明当前的分支是master分支。每次提交，master都会向前移动一步，一直指向最新的提交，master分支的时间线也越来越长。</p>
<p><img src="/工具/Tools-Git-tutorial/branch-2.png" alt="master分支示意图"></p>
<p>如果我们需要创建一个新的分支，例如从当前最新提交创建一个dev分支，那么其实只是创建了一个名为dev的指针，指向最新的提交，同时将HEAD修改为指向dev。使用的命令是<code>git branch dev</code> 和 <code>git checkout dev</code>,得到的结果如下图所示：</p>
<p><img src="/工具/Tools-Git-tutorial/branch-3.png" alt="master分支示意图"></p>
<p>因此，在Git中创建分支非常的快，因为只是创建一个指针，然后修改做一个指针。<br>我们可以使用<code>git branch</code>命令来查看当前的分支，该命令会列出所有的分支，并在当前使用的分支前使用<code>*</code>来标注。</p>
<p>从现在开始，所有的提交操作都是针对dev分支了，因此，如果做了一次新的提交，dev会向前移动一步，但是master指针不变，如下图：</p>
<p><img src="/工具/Tools-Git-tutorial/branch-4.png" alt="master分支示意图"></p>
<p>这个时候，要合并分支也很容易，只需要先使用<code>git checkout master</code>命令切换到master分支，然后在master分支中执行<code>git merge dev</code>来讲dev合并到当前分支就可以了。实际Git要做的只是将master指针指向最新的提交就可以了（这种合并叫做fast-forward，快速向前。当然并不是所有的合并都这么简单，我们后面会讲到）。如下图所示：</p>
<p><img src="/工具/Tools-Git-tutorial/branch-5.png" alt="master分支示意图"></p>
<p>当一个分支完成了历史使命的时候，我们可以将其删除。例如，如果我们要删除dev分支，只需要执行<code>git branch -d dev</code>就可以了。删除后就只剩下master分支了。</p>
<h2 id="4-2-解决分支之间的冲突"><a href="#4-2-解决分支之间的冲突" class="headerlink" title="4.2 解决分支之间的冲突"></a>4.2 解决分支之间的冲突</h2><p>前面介绍的合并分支是最简单的一种情况，当然现实世界通常不会这么简单。现实中常见的情况时在两个分支上我们都有提交，如下图所示：</p>
<p><img src="/工具/Tools-Git-tutorial/branch-6.png" alt="master分支示意图"></p>
<p>这个时候，如果我们执行<code>git merge dev</code>命令，就无法执行fast-forward合并，Git会试图把各自的修改合并起来。如果在dev分支上和在master分支上没有修改相同的文件，Git能够自动进行合并。如果有修改相同的文件，Git就处理不了，会告诉我们有冲突，需要我们手动解决冲突之后再提交。 使用<code>git status</code>命令可以看到冲突的文件。</p>
<p>如果我们打开冲突的文件，会看到类似下面的内容：<br><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">......</span><br><span class="line">&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</span><br><span class="line">HEAD中的内容（当前分支中的内容）</span><br><span class="line"><span class="comment">==========</span></span><br><span class="line">dev分支中的内容。</span><br><span class="line">&gt;&gt;&gt;&gt;&gt;&gt;&gt; dev</span><br></pre></td></tr></table></figure></p>
<p>对于每一个冲突，Git中会用<code>&lt;&lt;&lt;&lt;&lt;&lt;&lt;</code>,<code>=======</code>,<code>&gt;&gt;&gt;&gt;&gt;&gt;&gt;</code>来标记不同分支中的内容。我们需要将这一段修改为合适的内容，并再次提交。如下图所示：</p>
<p><img src="/工具/Tools-Git-tutorial/branch-7.png" alt="master分支示意图"></p>
<h1 id="5-通过远程仓库合作"><a href="#5-通过远程仓库合作" class="headerlink" title="5 通过远程仓库合作"></a>5 通过远程仓库合作</h1><p>一个团队中有多个开发人员，他们一起协助来完成软件开发的工作。因此，不可能大家都只在自己的本地仓库中修修改改。通常来说，我们会配置一个”中央仓库“，大家都把自己的本地仓库中的代码要提交到中央仓库。</p>
<h2 id="5-1-日常的工作流程"><a href="#5-1-日常的工作流程" class="headerlink" title="5.1 日常的工作流程"></a>5.1 日常的工作流程</h2><p>在软件开发过程中，我们首先是从中央仓库下载代码到本地仓库，这个操作在前面的第2.2节中已经描述过了。</p>
<p>有了本地仓库之后，日常的工作流程通常上：</p>
<ol>
<li>从中央仓库拉取最新的代码。</li>
<li>根据开发任务，在工作区中修改和测试代码。</li>
<li>将代码提交到本地仓库。</li>
<li>重复2和3，直到任务开发和测试完成。</li>
<li>将代码推送到中央仓库。</li>
</ol>
<h2 id="5-2-从中央仓库拉取代码"><a href="#5-2-从中央仓库拉取代码" class="headerlink" title="5.2 从中央仓库拉取代码"></a>5.2 从中央仓库拉取代码</h2><p>从中央仓库拉取代码，使用的是<code>git pull</code>命令。 git pull的时候，会试图自动合并本地与远程之间的冲突，如果无法自动合并，则需要手动解决冲突。解决的方式和我们前面第4.2节中说过的方法一样。</p>
<p>还有一种情况，是从中央仓库抓取一个新的分支。我们使用<code>git clone</code>命令从中央仓库克隆的时候，获取的是master分支。这个时候，中央仓库就是我们的远程仓库，默认的名称是origin。我们可以使用<code>git remote -v</code>来查看远程仓库的详细信息。</p>
<p>如果要从中央仓库获取一个新的分支，比如dev分支，则需要先执行<code>git checkout -b &lt;本地分支名称&gt; &lt;远程库名称&gt;/&lt;远程分支名称&gt;</code> 命令来获取新的分支。</p>
<h2 id="5-3-推送分支到中央仓库"><a href="#5-3-推送分支到中央仓库" class="headerlink" title="5.3 推送分支到中央仓库"></a>5.3 推送分支到中央仓库</h2><p>我们在本地做的修改，需要上传到中央仓库，使用的是<code>git push &lt;远程库名称&gt; &lt;分支名称&gt;</code>命令。这个过程被称为推送。</p>
<p>如果从上次下载代码到本次推送之间，远程仓库上的代码没有变化，那么本次推送就没有问题。但是通常来说，在团队合作的时候，在这段时间内会有其他人推送了新的代码到中央仓库。这个时候使用<code>git push</code>命令就会报错，并且会提示我们使用<code>git pull</code>获取最新的代码，合并代码后（无论是自动还是手动）再推送。</p>
<h1 id="6-其他"><a href="#6-其他" class="headerlink" title="6 其他"></a>6 其他</h1><h2 id="6-1-标签管理"><a href="#6-1-标签管理" class="headerlink" title="6.1 标签管理"></a>6.1 标签管理</h2><p>在Git中，每一次提交都有一个版本号，但是这个版本号对人类很不友好。没有任何含义，并且又长又难记。我们在日常的交流中无法使用这个版本号。</p>
<p>这种情况下，引入了tag的功能。Tag就是一个标签，我们可以在重要的提交版本上添加一个tag，这个tag其实就是指向这一次提交的版本。我们可以给tag赋予有意义的名称，例如V1.0这样的，这样方便我们日常的交流，和将来的查找。</p>
<p>在Git中打标签非常简单，执行<code>git tag &lt;tagname&gt;</code>就可以了。（我们暂时不讨论分支，后续的分支管理中在讨论。）</p>
<p>执行上面的命令的时候，默认是将标签打在分支的最后一次提交上。如果要将标签打在其他的提交上，可以使用<code>git tag &lt;tagname&gt; &lt;版本号&gt;</code>的方式来执行命令。</p>
<p>可以使用<code>git tag</code>命令来查看所有的标签，使用<code>git show &lt;tagname&gt;</code>来查看指定标签的信息。</p>
<p>我们创建的标签都是在本地，如果需要将标签推送到远程仓库，则可以使用<code>git push &lt;远程仓库名&gt; &lt;标签名&gt;</code>命令来推送。也可以一次性的将所有标签推送到远程，只需要使用命令<code>git push &lt;远程仓库名&gt; --tags</code>命令。</p>
<p>标签是不能移动和修改的，但是可以删除。因此，如果标签打错了，修改的方式就是删除错误的标签，重新创建正确的标签。<code>git tag -d &lt;name&gt;</code>就是用来删除指定名称的tag的命令。</p>
<p>如果标签已经被推送到了远程仓库，则需要先删除本地标签，然后使用如下形式的push命令来删除远程仓库中的标签。</p>
<p><code>git push &lt;远程仓库名&gt; :refs/tags/&lt;标签名&gt;</code></p>
<h2 id="6-2-git-stash操作"><a href="#6-2-git-stash操作" class="headerlink" title="6.2 git stash操作"></a>6.2 git stash操作</h2><p>有些时候，我们在工作的中途，会接到一些紧急的任务，比如生产环境的bug修复。这个时候我们手头的工作才做了一半，既不能提交，也不能丢弃。但是我们又需要切换到另外的分支中来处理紧急任务，该怎么办？<br>这个时候就可以用到git stash操作了。</p>
<p>git stash命令会将工作区的修改“隐藏”起来。如下例所示：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$git stash</span><br><span class="line">Saved working directory and index state WIP on master: 3793459 add new line in readme.txt</span><br><span class="line">HEAD is now at 3793459 add new line in readme.txt</span><br></pre></td></tr></table></figure></p>
<p>这个命令会将工作区中的修改创建一个存根，并保存到堆栈中。我们可以使用<code>git stash list</code>命令来查看堆栈中的存根。这个时候我们再用<code>git status</code>命令来查看的话，就会发现在工作区中没有新的修改。这个时候我们就可以切换分支，完成紧急任务。</p>
<p>当紧急任务完成之后，我们在切换回原来的分支，这个时候可以使用<code>git stash pop</code> ，可以从堆栈中弹出修改并应用到工作区，这样我们就可以继续以前的工作了。</p>
<h2 id="6-3-git配置"><a href="#6-3-git配置" class="headerlink" title="6.3 git配置"></a>6.3 git配置</h2><ul>
<li><p>配置用户信息: 使用命令<code>git config --global user.name=&quot;&lt;用户名&gt;&quot;</code>来配置用户的名字。使用命令<code>git config --global user.name=&quot;&lt;邮箱地址&gt;&quot;</code>来配置用户的email地址。这两个命令配置的是本机的全局配置。</p>
</li>
<li><p>忽略特殊的文件：在有些时候，我们希望不要提交工作区中的某些文件，比如java编译时生成的class文件等。我们可以将不希望提交的文件的名称放在Git工作区的根目录下的.gitignore文件中，Git就会忽略这些文件。该文件中可以使用通配符。</p>
</li>
</ul>

      
    </div>
    
    
    

    

    
      <div>
        <div style="padding: 10px 0; margin: 20px auto; width: 90%; text-align: center;">
  <div>如果你觉得这篇文章对你有帮助，请鼓励我继续创作！</div>
  <button id="rewardButton" disable="enable" onclick="var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}">
    <span>打赏</span>
  </button>
  <div id="QR" style="display: none;">

    
      <div id="wechat" style="display: inline-block">
        <img id="wechat_qr" src="/images/afrag-wang-reward.png" alt="Afrag Wang 微信支付"/>
        <p>微信支付</p>
      </div>
    

    
      <div id="alipay" style="display: inline-block">
        <img id="alipay_qr" src="/images/alipay.png" alt="Afrag Wang 支付宝"/>
        <p>支付宝</p>
      </div>
    

    

  </div>
</div>

      </div>
    

    
      <div>
        <ul class="post-copyright">
  <li class="post-copyright-author">
    <strong>本文作者：</strong>
    Afrag Wang
  </li>
  <li class="post-copyright-link">
    <strong>本文链接：</strong>
    <a href="http://www.afrag.wang/工具/Tools-Git-tutorial/" title="Git教程">http://www.afrag.wang/工具/Tools-Git-tutorial/</a>
  </li>
  
  

  <li class="post-copyright-license">
    <strong>版权声明： </strong>
    本博客所有文章除特声明外，均属于作者原创。所有原创文章均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" rel="external nofollow" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明出处！
  </li>
</ul>

      </div>
    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Git/" rel="tag"># Git</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/程序开发/Java-knowledge-supplement-6/" rel="next" title="我的Java知识补遗(6) —— Stream">
                <i class="fa fa-chevron-left"></i> 我的Java知识补遗(6) —— Stream
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/DevOps/DevOpsPractice-1/" rel="prev" title="DevOps实践指南(1) —— 为什么要实施DevOps">
                DevOps实践指南(1) —— 为什么要实施DevOps <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">Afrag Wang</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">22</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">6</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">14</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#1-Git是什么"><span class="nav-text">1 Git是什么</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2-创建本地仓库"><span class="nav-text">2. 创建本地仓库</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#2-1-从头开始创建本地仓库"><span class="nav-text">2.1 从头开始创建本地仓库</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-2-从远程仓库克隆"><span class="nav-text">2.2 从远程仓库克隆</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#3-使用本地仓库进行版本管理"><span class="nav-text">3 使用本地仓库进行版本管理</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#3-1-工作区和暂存区"><span class="nav-text">3.1 工作区和暂存区</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-2-提交版本和查看历史"><span class="nav-text">3.2 提交版本和查看历史</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-3-版本回退"><span class="nav-text">3.3 版本回退</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-4-管理修改"><span class="nav-text">3.4 管理修改</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#4-分支管理"><span class="nav-text">4 分支管理</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#4-1-创建与合并分支"><span class="nav-text">4.1 创建与合并分支</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-2-解决分支之间的冲突"><span class="nav-text">4.2 解决分支之间的冲突</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#5-通过远程仓库合作"><span class="nav-text">5 通过远程仓库合作</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#5-1-日常的工作流程"><span class="nav-text">5.1 日常的工作流程</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-2-从中央仓库拉取代码"><span class="nav-text">5.2 从中央仓库拉取代码</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-3-推送分支到中央仓库"><span class="nav-text">5.3 推送分支到中央仓库</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#6-其他"><span class="nav-text">6 其他</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#6-1-标签管理"><span class="nav-text">6.1 标签管理</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-2-git-stash操作"><span class="nav-text">6.2 git stash操作</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-3-git配置"><span class="nav-text">6.3 git配置</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Afrag Wang</span>

  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
    
      <span class="post-meta-item-text">Site words total count&#58;</span>
    
    <span title="Site words total count">26.1k</span>
  
</div>








  <div class="footer-custom">Afrag个人博客</div>


        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  
  <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.4.js"></script>
  <script>AV.initialize("vGiChtlnP07wcVG2GfTwcs1L-gzGzoHsz", "INv1WrjzQC8mK5PH17l4RCo3");</script>
  <script>
    function showTime(Counter) {
      var query = new AV.Query(Counter);
      var entries = [];
      var $visitors = $(".leancloud_visitors");

      $visitors.each(function () {
        entries.push( $(this).attr("id").trim() );
      });

      query.containedIn('url', entries);
      query.find()
        .done(function (results) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.get('url');
            var time = item.get('time');
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
          for(var i = 0; i < entries.length; i++) {
            var url = entries[i];
            var element = document.getElementById(url);
            var countSpan = $(element).find(COUNT_CONTAINER_REF);
            if( countSpan.text() == '') {
              countSpan.text(0);
            }
          }
        })
        .fail(function (object, error) {
          console.log("Error: " + error.code + " " + error.message);
        });
    }

    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();
      var query = new AV.Query(Counter);

      query.equalTo("url", url);
      query.find({
        success: function(results) {
          if (results.length > 0) {
            var counter = results[0];
            counter.fetchWhenSave(true);
            counter.increment("time");
            counter.save(null, {
              success: function(counter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(counter.get('time'));
              },
              error: function(counter, error) {
                console.log('Failed to save Visitor num, with error message: ' + error.message);
              }
            });
          } else {
            var newcounter = new Counter();
            /* Set ACL */
            var acl = new AV.ACL();
            acl.setPublicReadAccess(true);
            acl.setPublicWriteAccess(true);
            newcounter.setACL(acl);
            /* End Set ACL */
            newcounter.set("title", title);
            newcounter.set("url", url);
            newcounter.set("time", 1);
            newcounter.save(null, {
              success: function(newcounter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(newcounter.get('time'));
              },
              error: function(newcounter, error) {
                console.log('Failed to create');
              }
            });
          }
        },
        error: function(error) {
          console.log('Error:' + error.code + " " + error.message);
        }
      });
    }

    $(function() {
      var Counter = AV.Object.extend("Counter");
      if ($('.leancloud_visitors').length == 1) {
        addCount(Counter);
      } else if ($('.post-title-link').length > 1) {
        showTime(Counter);
      }
    });
  </script>



  

  

  
  

  

  

  


</body>
</html>
